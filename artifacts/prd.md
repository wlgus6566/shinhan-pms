# PMS 아키텍처

## 1. 개요

### 1.1 프로젝트명

신한카드 운영&고도화 업무 관리용 PMS (Project Management System)

### 1.2 목적

웹에이전시 프로젝트 운영 및 고도화 업무의 효율적인 관리를 위한 시스템 구축

### 1.3 대상 사용자

- PM (Project Manager)
- PL (Project Leader)
- PA (Project Assistant)
- 기획자, 디자이너, 퍼블리셔, 개발자

### 1.3 핵심 원칙

| 원칙          | 설명                                                      |
| ------------- | --------------------------------------------------------- |
| **모노레포**  | FE/BE 타입 공유, 공통 유틸/SDK 공유, CI 파이프라인 표준화 |
| **TDD**       | 도메인 로직 중심 테스트 우선 개발, ROI 높은 영역 집중     |
| **AI-Driven** | 에이전트 기반 워크플로우, 규칙 문서화를 통한 조직 학습    |

---

## 2. 기술 스택

### 2.1 전체 구성

| 영역         | 기술                     | 비고                                      |
| ------------ | ------------------------ | ----------------------------------------- |
| 모노레포     | turborepo + pnpm         | Affected 빌드/테스트 지원                 |
| 프론트엔드   | Next.js + shadcn/ui      | CSR (Client-Side Rendering), Tailwind CSS |
| UI 컴포넌트  | shadcn/ui + Radix UI     | 재사용 가능한 컴포넌트, 접근성            |
| 폼 관리      | react-hook-form + zod    | 타입 안전 validation                      |
| 백엔드       | NestJS (Fastify adapter) | 구조화/DI/모듈화, 팀 표준화               |
| 데이터베이스 | PostgreSQL               | JSONB, Full-text, 확장성                  |
| ORM          | Prisma                   | 타입 안전, 마이그레이션                   |
| 검증         | Zod                      | 런타임 타입 검증 (FE/BE 공통)             |
| API 문서화   | @nestjs/swagger          | http://localhost:3000/docs                |
| 테스트       | Vitest + Playwright      | Unit/Integration + E2E                    |
| CI/CD        | GitHub Actions           | Affected 빌드                             |

---

## 3. 기능 요구사항

### 3.1 회원 관리

| 기능            | 설명                       | 우선순위 |
| --------------- | -------------------------- | -------- |
| 회원가입        | 이메일 기반 가입           | P1       |
| 로그인/로그아웃 | JWT 기반 인증              | P1       |
| 파트 구분       | PM, 기획, 디자인, 퍼블리싱 | P1       |
| 등급 관리       | PM, PL, PA 등급 구분       | P1       |
| 권한 관리       | 역할 기반 접근 제어 (RBAC) | P1       |
| 프로필 관리     | 개인정보 수정              | P2       |

### 3.2 프로젝트 관리

| 기능          | 설명                        | 우선순위 |
| ------------- | --------------------------- | -------- |
| 프로젝트 등록 | 프로젝트 기본 정보 입력     | P1       |
| 프로젝트 수정 | 프로젝트 정보 변경          | P1       |
| 프로젝트 삭제 | 프로젝트 삭제 (소프트 삭제) | P1       |
| 프로젝트 목록 | 프로젝트 리스트 조회        | P1       |
| 프로젝트 상세 | 프로젝트 상세 정보 조회     | P1       |
| 팀원 배정     | 프로젝트별 팀원 할당        | P1       |

### 3.3 업무 관리

| 기능           | 설명                                 | 우선순위 |
| -------------- | ------------------------------------ | -------- |
| 업무 등록      | 업무 생성 (업무유형, 업무명, 난이도) | P1       |
| 진행상태 관리  | 대기/진행/완료/보류 상태             | P1       |
| 일정 관리      | 계획 일정 vs 실행 일정               | P1       |
| 투입시간 기록  | 업무별 작업 시간 기록                | P1       |
| 작업 내역      | 상세 디스크립션 작성                 | P1       |
| 담당자 지정    | 업무별 담당자 할당                   | P1       |
| 업무 검색/필터 | 조건별 업무 검색                     | P2       |

### 3.4 일정 관리

| 기능         | 설명                  | 우선순위 |
| ------------ | --------------------- | -------- |
| 캘린더 뷰    | 월간/주간 캘린더 형태 | P1       |
| 일정 등록    | 캘린더에 일정 기입    | P1       |
| 드래그앤드롭 | 일정 이동/수정        | P2       |
| 마일스톤     | 주요 일정 표시        | P2       |

### 3.5 현황 관리

| 기능        | 설명                     | 우선순위 |
| ----------- | ------------------------ | -------- |
| 인원별 현황 | 인원별 진행상태/투입공수 | P1       |
| 업무별 현황 | 업무별 진행상태/투입공수 | P1       |
| 대시보드    | 전체 현황 요약           | P1       |
| 통계 차트   | 시각화된 데이터          | P2       |

### 3.6 보고서

| 기능            | 설명                  | 우선순위 |
| --------------- | --------------------- | -------- |
| 주간보고        | 주간 업무 보고서 생성 | P2       |
| 월간보고        | 월간 업무 보고서 생성 | P2       |
| 보고서 내보내기 | PDF/Excel 다운로드    | P3       |

---

## 4. 비기능 요구사항

### 4.1 성능

- 페이지 로딩: 3초 이내
- API 응답: 500ms 이내
- 동시 접속자: 100명 이상

### 4.2 보안

- HTTPS 적용
- JWT 토큰 기반 인증
- 비밀번호 암호화 (bcrypt)
- SQL Injection 방지
- XSS 방지

---

## 5. 배포 전략

### 5.1 FE/BE 독립 배포

**원칙:**

- web(Next) / api(NestJS) 독립 배포
- 타입은 공유하되 런타임은 분리

**이유:**

- 인증/권한/트랜잭션/배치 확장 시 유지보수성
- BE/FE 팀 릴리즈 독립성 → 병목 감소

---

## 6. AI-Driven 워크플로우

### 6.1 에이전트 체계

```
PM (프로젝트 관리)
├── Planner (기획자)
│   └── 요구사항 정의, 유저 스토리
├── Modeler (데이터베이스)
│   └── 스키마 설계
└── Developer
    └── API 개발 / UI 개발 (full stack)
```

### 6.2 운영 원칙

- 각 에이전트가 전문 영역 담당
- 완료 후 검수 → 다음 단계 진행
- **"마음에 안 드는 결과"가 나오면 결과물을 고치기보다 규칙을 고친다** → 조직 학습
